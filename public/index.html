<!-- Header -->
<!DOCTYPE html>
<html lang="en-gb">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>dBDefender Dashboard</title>
        <link rel="stylesheet" href="default.css" />
        <script type="module" src="main.js"></script>
        <link rel="preconnect" href="https://fonts.googleapis.com" />
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
        <link rel="icon" type="image/x-icon" href="/images/favicon.ico" />
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    </head>

    <!-- Document Start -->
    <section class="layout">
        <header>
            <h1>dBDefender Dashboard</h1>
        </header>

        <main>
            <div class="primaryBox" id="infoBox">
                <div class="h2title">
                    <h2>About</h2>
                </div>
                <p>
                    This IoT-based project aims to help users monitor their
                    sound levels so they can identify when these are too high.
                </p>

                <p>
                    This consists of an esp-32 based decibel sensor, which
                    measures sound levels in the user's environment, and a
                    digital system which calculated and tracks the "noise dose"
                    users are exposed to via music from headphones.
                </p>

                <p>
                    The user is notified on this app if their sound levels (5
                    minute average) exceed 70 dB. Although not medically
                    dangerous, this volume can be disturbing to flatmates and
                    neighbours. Users can take action when this gets too loud.
                </p>

                <p>
                    The user is also notified of the
                    <a
                        href="https://www.larsondavis.com/learn/industrial-hygiene/noise-dosimetry-terminology"
                        >Noise Dose</a
                    >
                    they are exposed to. This measured as a percentage, where
                    values under 100% mean they are under the safe limit. The
                    information needed for this (Average dB Level and Exposure
                    time) is collected and available by default from certain
                    smartphones. On iPhone, this is via the <em>Health</em> app.
                </p>

                <p>
                    Notifications are persistent, thus users can look at their
                    exposure over time.
                </p>
            </div>

            <div class="primaryBox" id="notificationBox">
                <h2>Notifications</h2>

                <button type="button" id="testButton">
                    Create Test Notification
                </button>

                <div id="notificationsSection"></div>
            </div>

            <div class="primaryBox" id="soundLevelBox">
                <h2>Live Sound Levels</h2>

                <div id="dBIndicatorContainer">
                    <div class="inddBContainer">
                        <h3>Current Sound Level</h3>
                        <div id="liveDbLevel" class="dBIndicator"></div>
                        <div id="liveDbTimestamp" class="dBTimestamp"></div>
                    </div>

                    <div class="inddBContainer">
                        <h3>Average Sound Level (Past 5 Minutes)</h3>
                        <div id="averageDbLevel" class="dBIndicator"></div>
                        <div id="averageDbTimestamp" class="dBTimestamp"></div>
                    </div>
                </div>
            </div>

            <div class="primaryBox" id="dBgraphContainer">
                <h2>Decibel Graph</h2>
                <canvas id="dbGraph"></canvas>
            </div>

            <div class="primaryBox" id="noiseDoseContainer">
                <h2>Noise Dose Calculator</h2>
                <div class="inputContainer">
                    <label for="averageDecibel">Average dB Level</label>
                    <input
                        type="number"
                        id="averageDecibel"
                        name="averageDecibel"
                        class="doseInput"
                        required
                    />
                </div>

                <div class="inputContainer">
                    <label for="exposureTime">Exposure time (hours)</label>
                    <input
                        type="number"
                        id="exposureTime"
                        name="exposureTime"
                        class="doseInput"
                        required
                    />
                </div>

                <button type="button" id="formButton">Calculate</button>
            </div>
        </main>

        <footer>
            Maximilian Matthews | DE4 Sensing and Internet of Things | Imperial
            College London
        </footer>
    </section>
</html>
